(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-404e2bd8"],{"237e":function(t,e,a){},"2d88":function(t,e,a){"use strict";var o=a("237e"),i=a.n(o);i.a},"474c":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:{height:t.deviceHieght-26+"px"}},[a("div",{style:{height:t.deviceHieght-26+"px"}},[a("div",{staticClass:"page-tab-container"},[a("mt-tab-container",{staticClass:"page-tabbar-tab-container",style:{height:t.deviceHieght-26+"px"},attrs:{swipeable:"swipeable"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[a("mt-tab-container-item",{attrs:{id:"offer"}},[a("mt-header",{attrs:{fixed:"fixed",title:"待办事项"}},[a("mt-button",{attrs:{slot:"right",icon:"more"},on:{click:t.tools},slot:"right"})],1),a("div",{style:{height:t.wrapperHeight+"px",background:"gray"},attrs:{id:"waittodo"}},[a("mt-navbar",{model:{value:t.waitTodo,callback:function(e){t.waitTodo=e},expression:"waitTodo"}},[a("mt-tab-item",{attrs:{id:"cli"}},[t._v("交强险")]),a("mt-tab-item",{attrs:{id:"gap"}},[t._v("商业险")]),a("mt-tab-item",{attrs:{id:"checkcar"}},[t._v("验车")])],1),a("div",{staticClass:"page-loadmore",style:{height:t.deviceHieght+"px",background:"lightgray"}},[a("div",{ref:"wrapper",staticClass:"page-loadmore-wrapper",style:{height:t.wrapperHeight+"px"}},[a("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTop,"bottom-method":t.loadBottom,"bottom-all-loaded":t.allLoaded},on:{"translate-change":t.translateChange,"top-status-change":t.handleTopChange,"bottom-status-change":t.handleBottomChange}},[a("ul",{staticClass:"page-loadmore-list"},t._l(t.billlist,function(e){return a("mt-cell",{attrs:{title:e.plate_num,value:e.insurant},nativeOn:{click:function(a){t.loadDetail(e)}}})})),a("div",{staticClass:"mint-loadmore-top",attrs:{slot:"top"},slot:"top"},[a("span",{directives:[{name:"show",rawName:"v-show",value:"loading"!==t.topStatus,expression:"topStatus !== 'loading'"}],class:{"is-rotate":"drop"===t.topStatus}},[t._v("↓")]),a("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.topStatus,expression:"topStatus === 'loading'"}]},[a("mt-spinner",{attrs:{type:"snake"}})],1)]),a("div",{staticClass:"mint-loadmore-bottom",attrs:{slot:"bottom"},slot:"bottom"},[a("span",{directives:[{name:"show",rawName:"v-show",value:"loading"!==t.bottomStatus,expression:"bottomStatus !== 'loading'"}],class:{"is-rotate":"drop"===t.bottomStatus}},[t._v("↑")]),a("span",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.bottomStatus,expression:"bottomStatus === 'loading'"}]},[a("mt-spinner",{attrs:{type:"snake"}})],1)])])],1)])],1)],1),a("mt-tab-container-item",{attrs:{id:"bill"}},[a("mt-header",{attrs:{fixed:"fixed",title:"订单"}}),a("div",{attrs:{id:"searchdiv"}},[a("i",{staticClass:"mint-toast-icon mintui mintui-search",attrs:{id:"searchIcon"}}),a("mt-field",{attrs:{id:"searchbar",label:"label",placeholder:"输入车牌号/姓名/手机号码查询投保信息"},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),a("mt-button",{attrs:{type:"primary",id:"searchButton"},on:{click:function(e){t.searchbill()}}},[t._v("搜索")])],1),t._l(t.billlist,function(e,o){return a("div",{attrs:{id:"billlist"},on:{click:function(a){t.loadDetail(e)}}},[a("mt-cell",{attrs:{title:e.plate_num,label:e.remark,value:e.insured_is}})],1)})],2)],1)],1)]),a("mt-tabbar",{model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[a("mt-tab-item",{attrs:{id:"offer"}},[t._v("待办事项")]),a("mt-tab-item",{attrs:{id:"bill"}},[t._v("订单")])],1)],1)},i=[],s=a("a322"),l=(a("cadf"),a("551c"),a("097d"),a("76a0")),n={name:"mindex",components:{Loadmore:l["Loadmore"]},data:function(){var t;return t={waitTodo:"cli",selected:"offer",searchValue:"",billlist:[],list:[],allLoaded:!1,bottomStatus:"",wrapperHeight:0,topStatus:""},Object(s["a"])(t,"wrapperHeight",0),Object(s["a"])(t,"translate",0),Object(s["a"])(t,"moveTranslate",0),Object(s["a"])(t,"deviceHieght",0),Object(s["a"])(t,"pageInfo",{page:1,total:0,size:15}),t},created:function(){},mounted:function(){this.wrapperHeight=document.documentElement.clientHeight-this.$refs.wrapper.getBoundingClientRect().top,this.deviceHieght=document.documentElement.clientHeight},watch:{waitTodo:function(t,e){console.log("val => ".concat(t," oldVal => ").concat(e)),this.busy=!0,this.isMoreLoading=!0,this.pageInfo.page=1,this.pageInfo.totalPage=1,this.list=[],this.noMore=!1,this.getProjectInfo("newLoad","watch")},selected:function(t,e){console.log("当前页面 -> ".concat(t," 上个页面是 ->").concat(e,"}")),this.billlist=[],"offer"==t&&(this.pageInfo.page=1,this.getProjectInfo("newLoad","selected"))}},methods:{searchbill:function(){var t=this;console.log("search ~~~"+this.searchValue),this.$axios.get("/api/vehicles",{params:{plate_num:this.searchValue}}).then(function(e){console.log("".concat(JSON.stringify(e.data.result))),t.billlist=e.data.result})},loadDetail:function(t){console.log("loadDetail ---\x3e ".concat(JSON.stringify(t))),this.$router.push({path:"/m_billdetail",query:{detail:t}})},tools:function(){console.log("点击了工具箱"),this.$router.push({path:"/m_tools"})},handleBottomChange:function(t){this.bottomStatus=t},loadBottom:function(){console.log("ssss"),this.getProjectInfo("loadMore","loadBottom")},handleTopChange:function(t){this.moveTranslate=1,this.topStatus=t},translateChange:function(t){var e=+t;this.translate=e.toFixed(2),this.moveTranslate=(1+e/70).toFixed(2)},loadTop:function(){this.pageInfo.page=1,this.getProjectInfo("newLoad","loadTop")},getProjectInfo:function(t,e){var a=this;this.isLoading=!0;var o=localStorage.getItem("identity");this.busy=!0;var i={querytype:this.waitTodo,days:5,id:localStorage.getItem("id"),page:this.pageInfo.page,identity:o};console.log("path ".concat(e," options ").concat(JSON.stringify(i))),"manager"==o?i["managerid"]=localStorage.getItem("id"):i["employeeid"]=localStorage.getItem("id"),this.$axios.post("api/vehicles/getVehicles",i).then(function(e){a.$refs.loadmore.onBottomLoaded();var o=e.data;0===o.code?(a.pageInfo.page=a.pageInfo.page+1,a.billlist="loadMore"===t?a.billlist.concat(o.data.list):o.data.list,a.pageInfo.total=o.data.pagination.total,a.pageInfo.totalPage=Math.ceil(a.pageInfo.total/a.pageInfo.page_size),console.log("billist.length ".concat(a.billlist.length," <----\x3e total ").concat(a.pageInfo.total)),a.billlist.length==a.pageInfo.total?a.allLoaded=!0:a.allLoaded=!1,console.log("总页数",Math.ceil(a.pageInfo.total/a.pageInfo.page_size))):Object(l["Toast"])("出错了 ---\x3e>> ".concat(e.error,"}")),a.isLoading=!1,a.isMoreLoading=!1})}}},c=n,r=(a("2d88"),a("2877")),d=Object(r["a"])(c,o,i,!1,null,"5e2a8bc1",null);d.options.__file="MIndex.vue";e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-404e2bd8.d13f6ea4.js.map